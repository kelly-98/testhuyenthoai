<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="shortcut icon" href="products/gn/favicon.ico" />
    <meta
      name="keywords"
      content="gunny hoi uc, gunny cuong hoa hên xui, gunny 3.0, gunny 3.4, gunny 3.6, gunny 2012, gunny huan chuong ,gunny free, ddtank, ddtank private, gunny private, gunny lậu, gunny private, gunny miễn phí, gunny đầy đủ tính năng, gunny phó bản chuẩn zing, gunny có doanh chiến, gunny có guild chiến, gunny có tranh bá chí tôn, gunny có pet tôn ngộ không, gunny miễn phí pet tôn ngộ không, gunny, gunny lau, gunny lau moi nhat, gunny phien ban moi, gunny moi nhat, gunny dai chien 7 thanh pho, gunny lau full xu, gunnyfullxu, gunny lau co pet ton ngo khong, gunny lau mien phi pet ton ngo khong, pet ton ngo khong gunny, free pet ton ngo khong, gunny full xu, gunny cay quoc, gunny day du tinh nang, gunny full pho ban, gunny pho ban chuan, gunny pho ban do ngon"
    />
    <meta name="author" content="DDT Coder" />
    <meta
      name="description"
      content="Gunny phiên bản cày cuốc xu và huân chương mua đá cường hóa hên xui."
    />
    <meta
      property="og:image:alt"
      content="https://127.0.0.1/assets/img/GunVip.jpg"
    />
    <meta
      property="og:image"
      content="https://127.0.0.1/assets/img/GunVip.jpg"
    />
    <title>Gunny 3.0 | Gunny 3.0 Hay Nhất 2022</title>
    <meta
      property="og:title"
      content="127.0.0.1 | Gunny Phiên Bản Năm 2009 - 2010 Chơi Trên Mobile & PC "
    />
    <meta
      property="og:description"
      content="Gunny phiên bản cày cuốc xu và huân chương mua đá cường hóa hên xui. Tải ngay để trải nghiệm nhé!"
    />
    <meta
      property="og:type"
      content="Gunny phiên bản cày cuốc xu và huân chương mua đá cường hóa hên xui. Tải ngay để trải nghiệm nhé!"
    />
    <meta
      name="csrf-token"
      content="4iXkjGVzpPeYm1FWUpP4AjyVBXXTbutv9Pge0j22"
    />

    <!-- <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,900"> -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="" />
    <link href="css2?family=Roboto&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="assets/css/owl.carousel.min.css" />
    <link rel="stylesheet" href="assets/css/styles.css" />
    <link rel="stylesheet" href="assets/css/responsive.css" />
    <link rel="stylesheet" href="assets/css/carousel.css" />
    <script src="assets/js/jquery-3.3.1.min.js"></script>
    <script src="config.js?ver=040002032023"></script>
    <script src="admin_common.js"></script>
    <script>
      $(document).ready(function () {
        // inspired by http://jsfiddle.net/arunpjohny/564Lxosz/1/
        $(".table-responsive-stack")
          .find("th")
          .each(function (i) {
            $(".table-responsive-stack td:nth-child(" + (i + 1) + ")").prepend(
              '<span class="table-responsive-stack-thead">' +
                $(this).text() +
                ":</span> "
            );
            $(".table-responsive-stack-thead").hide();
          });

        $(".table-responsive-stack").each(function () {
          var thCount = $(this).find("th").length;
          var rowGrow = 100 / thCount + "%";
          //console.log(rowGrow);
          $(this).find("th, td").css("flex-basis", rowGrow);
        });

        function flexTable() {
          if ($(window).width() < 768) {
            $(".table-responsive-stack").each(function (i) {
              $(this).find(".table-responsive-stack-thead").show();
              $(this).find("thead").hide();
            });

            // window is less than 768px
          } else {
            $(".table-responsive-stack").each(function (i) {
              $(this).find(".table-responsive-stack-thead").hide();
              $(this).find("thead").show();
            });
          }
          // flextable
        }

        flexTable();

        window.onresize = function (event) {
          flexTable();
        };

        // document ready
      });
    </script>
  </head>
  <body>
    <script>
      // khai bao ham global
      var max_loading_gif_count = 10;

      var full_url = config.app.host;

      var isAdsDisplayed = true;
    </script>
    <script src="assets/js/functionuncrypt.js"></script>
    <script>
      function getCookieW(cname) {
        var name = cname + "=";
        var ca = document.cookie.split(";");
        for (var i = 0; i < ca.length; i++) {
          var c = ca[i];
          while (c.charAt(0) == " ") {
            c = c.substring(1);
          }
          if (c.indexOf(name) == 0) {
            return c.substring(name.length, c.length);
          }
        }
        return "";
      }
    </script>

    <a
      id="modalCedrusAllIndex"
      class="right animElement just-show"
      href="#"
      data-toggle="modal"
      data-target="#modalCedrus"
    ></a>

    <div class="modal" id="modalCedrus" role="dialog">
      <div class="content">
        <div id="modal-title-cedrus" class="title" style="color: red">
          Title
        </div>
        <div class="box">
          <div id="modal-body-cedrus">
            <span id="statusposttxt" style="color: red; font-size: x-large"
              >Content</span
            >
          </div>
        </div>
      </div>
      <div class="close">
        <span></span>
      </div>
    </div>

    <div class="outer">
      <div style="display: none" id="sbbhscc"></div>
      <script type="text/javascript">
        var sbbvscc = "";
        var sbbgscc = "";

        function genPid() {
          return String.fromCharCode(118) + String.fromCharCode(98);
        }
      </script>

      <header>
        <style>
          #bgvid {
            position: absolute;
            top: -77px;
            left: -47px;
            object-fit: cover;
          }

          @media (max-width: 1025px) {
            .section__iframe iframe {
              pointer-events: all;
            }
          }

          .container {
            display: block;
            margin: 0 auto;
          }

          hr.split {
            margin: 0;
            border: 0;
            background: transparent;
          }

          .clearfix:after {
            content: "";
            clear: both;
            display: table;
          }

          .desktop {
            display: flex;
          }

          .mobile {
            display: none;
          }

          @media (max-width: 1025px) {
            .desktop {
              display: none;
            }

            .mobile {
              display: flex;
            }
          }

          @media (max-width: 700px) {
            .desktop {
              display: none;
            }

            .mobile {
              display: flex;
            }
          }
        </style>

        <!-- Navbar -->
        <nav id="menu">
          <ul class="container">
            <li>
              <a href="index.html">TRANG CHỦ</a>
            </li>
            <li>
              <a href="javascript:accountSection()">TÀI KHOẢN</a>
            </li>
            <li>
              <a href="javascript:rechargeSection()">NẠP TIỀN</a>
            </li>
            <li>
              <a href="javascript:chargeMoneySection()">CHUYỂN XU</a>
            </li>
            <li>
              <a href="javascript:openFanpage()">FANPAGE</a>
            </li>
            <li>
              <a href="javascript:openGroupPage()">GROUP</a>
            </li>
          </ul>
        </nav>
      </header>
      <main>
        <div class="container">
          <aside>
            <style>
              .clearfix::after {
                content: "";
                display: block;
                clear: both;
              }
            </style>
            <!-- Login Frm -->
            <div id="login">
              <input
                class="animElement slide-left time-300"
                id="usernamelogin"
                placeholder="Tài Khoản"
                autocomplete="off"
              />
              <input
                class="animElement slide-left time-300"
                id="passwordlogin"
                type="password"
                placeholder="Mật Khẩu"
                autocomplete="new-password"
              />
              <button
                class="login animElement slide-right"
                id="loginbtn"
                type="submit"
              >
                Login
              </button>
              <div
                class="footer"
                id="sign-in-error"
                style="
                  display: none;
                  text-align: center;
                  font-family: 'BreeSerif';
                "
              ></div>
              <div class="footer">
                <a
                  class="left animElement just-show"
                  href="forgot-password.html"
                  >Quên mật khẩu?</a
                >
                <a
                  class="right animElement just-show"
                  href="javascript:registerSection()"
                  >Đăng ký</a
                >
              </div>

              <div class="footer" style="display: flex">
                <a
                  style="font-weight: bold"
                  class="animElement just-show"
                  href="login-puffin.html"
                  >ĐĂNG NHẬP PUFFIN IOS</a
                >
              </div>
            </div>

            <div class="widget">
              <h3>DANH SÁCH MÁY CHỦ</h3>
              <div class="inner">
                <ul
                  id="servers-list-container"
                  class="listtag animElement slide-left time-1200"
                ></ul>
              </div>
            </div>

            <div class="widget">
              <h3>BẢNG XẾP HẠNG</h3>
              <div class="inner">
                <form
                  id="frm-load-ranking"
                  class="filter animElement slide-top"
                >
                  <select name="server-id" id="serverid"></select>

                  <select name="type" id="top">
                    <option value="1" selected="">Lực Chiến</option>
                    <option value="2">Level</option>
                    <option value="3">Online</option>
                    <option value="4">Hấp Dẫn</option>
                    <option value="5">Tiêu xu</option>
                    <option value="6">Nạp xu</option>
                  </select>
                </form>
                <ul class="listtag small animElement slide-left time-600">
                  <li class="head">
                    <span class="tag transp">
                      <i class="icon-trophy"></i>
                    </span>
                    <span>Nhân vật</span>
                    <span class="right">Lực chiến</span>
                  </li>
                  <span id="load-ranking-container" style="display: block">
                    <script></script>
                  </span>
                  <div id="loadingtop" style="display: none"></div>
                  <style>
                    .xemthem {
                      width: calc(100% + 30px);
                      margin: 15px -15px 0 -15px;
                      color: #a49c7a;
                      font-size: 13px;
                      display: inline-block;
                      padding: 12px;
                      text-align: center;
                      border-top: 1px solid rgba(164, 156, 122, 0.3);
                    }

                    .xemthem:hover {
                      background: rgba(164, 156, 122, 0.1);
                    }
                  </style>
                  <!--a href="javascript:void(0);" onclick="xemthemtop()" id="xemthemtop" class="xemthem">Xem thêm...</a-->
                </ul>
              </div>
            </div>

            <div class="widget">
              <h3>Fanpage</h3>
              <center>
                <iframe
                  src="https://www.facebook.com/plugins/page.php?href=https://www.facebook.com/gunny1233&tabs=timeline&width=298&height=500&small_header=false&adapt_container_width=true&hide_cover=false&show_facepile=false&appId"
                  width="298"
                  height="500"
                  style="border: none; overflow: hidden"
                  scrolling="no"
                  frameborder="0"
                  allowfullscreen="true"
                  allow="autoplay; clipboard-write; encrypted-media; picture-in-picture; web-share"
                ></iframe>
              </center>
            </div>
          </aside>

          <!-- Page Content -->
          <section>
            <section class="box register">
              <div class="title-new">
                <h1 style="color: #c3332a">ADMIN</h1>
              </div>
              <div class="tabsContent">
                <div class="active biglist">
                  <form id="createAccountForm" class="account">
                    <label>Nhập tên tài khoản muốn cộng coin</label>
                    <label>
                      <span>Tên tài khoản</span>
                      <input
                        id="txtUsername"
                        type="text"
                        placeholder="Tên tài khoản"
                        autocomplete="off"
                        required=""
                        tabindex="1"
                      />
                      <div
                        id="account_search"
                        style="
                          width: 100%;
                          display: contents;
                          word-wrap: break-word;
                        "
                      >
                        <!-- <a href="" target="_blank" rel="noopener noreferrer">vinhkosd</a>
                                        <a href="" target="_blank" rel="noopener noreferrer">vinhlwe</a> -->
                      </div>
                    </label>
                    <label>
                      <span>Add vào log nạp?</span>
                      <input
                        checked="true"
                        style="width: unset; height: unset"
                        id="txtIsLog"
                        type="checkbox"
                        placeholder=""
                        autocomplete="off"
                        required=""
                        tabindex="3"
                      />
                    </label>
                    <label>
                      <span>Số coin muốn cộng</span>
                      <input
                        id="txtCoin"
                        type="number"
                        placeholder="Số coin muốn cộng"
                        autocomplete="off"
                        required=""
                        tabindex="2"
                      />
                    </label>
                    <label
                      class="errors-register-form"
                      style="display: none; color: red"
                    ></label>
                    <button class="button" id="addCoinBtn" type="button">
                      <span class="icon"></span> XÁC NHẬN
                    </button>
                  </form>
                </div>
                <div class="active biglist">
                  <form id="historyCoin" class="historyCoin">
                    <label>Lịch sử nạp coin</label>
                    <table class="table_HisCoin" id="tableOne">
                      <thead class="thead-dark">
                        <tr>
                          <th>user_id</th>
                          <th>username</th>
                          <th>Số coin vừa nạp</th>
                          <th>Thời gian nạp</th>
                        </tr>
                      </thead>
                      <tbody class="body_HisCoin" id="body_HisCoin"></tbody>
                    </table>
                  </form>
                </div>
              </div>
            </section>
            <div id="dynamicContentView" style="float: left">
              <section class="box register">
                <div class="title-new">
                  <h1 style="color: #c3332a">Thay đổi thông tin người dùng</h1>
                </div>
                <div class="tabsContent">
                  <div class="active biglist">
                    <form id="changePasswordFrm" class="account">
                      <label>
                        <span>Số điện thoại mới:</span>
                        <input
                          type="text"
                          id="infoPhone"
                          placeholder="Nhập sđt mới"
                          autocomplete="off"
                          required=""
                        />
                        <div
                          id="usernameError"
                          class="error-check"
                          style="display: none"
                        >
                          <div
                            id="formtip_inner"
                            class="error-check-mess"
                          ></div>
                        </div>
                      </label>

                      <label>
                        <span>Mật khẩu mới:</span>
                        <input
                          id="infoNewPassword"
                          type="text"
                          placeholder="Mật khẩu mới"
                          autocomplete="off"
                          required=""
                          aria-autocomplete="list"
                        />
                        <div
                          id="emailError"
                          class="error-check"
                          style="display: none"
                        ></div>
                      </label>

                      <label>
                        <span>Nhập email mới:</span>
                        <input
                          type="text"
                          id="infoEmail"
                          placeholder="Nhập email"
                          autocomplete="off"
                          required=""
                        />
                        <div
                          id="regacc_passs_tooltip"
                          class="error-check"
                          style="display: none"
                        ></div>
                      </label>

                      <div class="button-functional-account">
                        <a
                          id="changeInfodBtn"
                          class="item"
                          style="
                            background-color: rgb(245, 98, 0);
                            border-color: rgb(250, 83, 0);
                          "
                          >Thay đổi thông tin người dùng
                        </a>
                      </div>
                      <div
                        class="errors-change-password-form"
                        style="color: green"
                      ></div>
                    </form>
                  </div>
                </div>
              </section>
            </div>
          </section>
        </div>
      </main>
    </div>

    <footer>
      <div class="container">
        <span class="text animElement zoom-in">
          Copyright © 127.0.0.1 - All rights reserved
        </span>
      </div>
      <div class="bottom">
        <nav class="container">
          <ul class="left">
            <li>
              <a href="">Home</a>
            </li>
            <li>
              <a href="#" target="_blank"> Recharge </a>
            </li>
            <li>
              <a href="#" target="_blank"> Support </a>
            </li>
            <li>
              <a href="#" target="_blank"> User Settings </a>
            </li>
            <li>
              <a href="#" target="_blank"> Facebook </a>
            </li>
          </ul>
          <span class="right">
            <a href="#" target="_blank"> Terms of Service </a>
            |
            <a href="#" target="_blank"> Privacy Policy </a>
          </span>
        </nav>
      </div>
    </footer>

    <script src="assets/js/self.js"></script>
    <script src="assets/js/slide.js"></script>

    <script type="text/javascript">
      function reloadCaptcha() {}
    </script>
    <script type="text/javascript">
      $(document).ready(function () {
        var page = 1;
        var stackNews = "";
        let fullAll = false;
        let fullAno = false;
        let fullNews = false;
        let fullEvent = false;

        loadNews(0, page);
        $("#all-news").click(function () {
          loadNews(0, 1);
          clearStackNewsAndResetPage();
        });
        $("#announ-news").click(function () {
          loadNews(1, 1);
          clearStackNewsAndResetPage();
        });
        $("#new-news").click(function () {
          loadNews(2, 1);
          clearStackNewsAndResetPage();
        });
        $("#event-news").click(function () {
          loadNews(3, 1);
          clearStackNewsAndResetPage();
        });

        function clearStackNewsAndResetPage() {
          stackNews = "";
          page = 1;
        }

        $("#loadMore").click(function () {
          page++;
          // console.log(page);
          // console.log(this)
          let type = 0;
          $(".newshome").each(function () {
            if ($(this).attr("class").includes("active")) {
              switch ($(this).text().trim()) {
                case "TẤT CẢ":
                  type = 0;
                  break;
                case "THÔNG BÁO":
                  type = 1;
                  break;
                case "TIN TỨC":
                  type = 2;
                  break;
                case "SỰ KIỆN":
                  type = 3;
                  break;
              }
            }
          });
          loadNews(type, page);
        });

        function loadNews(type, page) {
          $("#news2").html(
            '<center><img src="/assets/img/loader.gif" /></center>'
          ),
            $.ajax({
              headers: {
                "X-CSRF-TOKEN": $('meta[name="csrf-token"]').attr("content"),
              },
              url: config.app.createRoute("news"),
              type: "post",
              dateType: "json",
              data: {
                type: type,
              },
              success: function (t) {
                // console.log(t)
                switch (type) {
                  case 0:
                    if (t.length <= 0 && !fullAll) {
                      t += "<li>Không còn bài viết nào trong mục này</li>";
                      $("#news2").html(t);
                      fullAll = true;
                    }
                    break;
                  case 1:
                    if (t.length <= 0 && !fullAno) {
                      t += "<li>Không còn bài viết nào trong mục này</li>";
                      $("#news2").html(t);
                      fullAno = true;
                    }
                    break;
                  case 2:
                    if (t.length <= 0 && !fullNews) {
                      t += "<li>Không còn bài viết nào trong mục này</li>";
                      $("#news2").html(t);
                      fullNews = true;
                    }
                    break;
                  case 3:
                    if (t.length <= 0 && !fullEvent) {
                      t += "<li>Không còn bài viết nào trong mục này</li>";
                      $("#news2").html(t);
                      fullEvent = true;
                    }
                    break;
                }
                stackNews += t;
                $("#news2").html(stackNews);
              },
            });
        }
      });
    </script>
    <script type="text/javascript">
      $(document).ready(function () {
        userInterface();
        $("#usernamelogin").bind("keypress", function (e) {
          if (e.keyCode == 13) {
            e.preventDefault();
            login();
          }
        });
        $("#passwordlogin").bind("keypress", function (e) {
          if (e.keyCode == 13) {
            e.preventDefault();
            login();
          }
        });

        $("#loginbtn").click(function () {
          login();
        });

        function login() {
          $("#sign-in-error").css("color", "#ff7004");
          $("#sign-in-error").html(
            `<img src="/assets/img/loader.gif" style="width: 26px;height: 26px;"/><p style="font-weight: bold"> Đang đăng nhập, vui lòng đợi...</p>`
          );
          $("#sign-in-error").show();
          let username = $("#usernamelogin").val();
          let password = $("#passwordlogin").val();
          $.ajax({
            headers: {
              "X-CSRF-TOKEN": $('meta[name="csrf-token"]').attr("content"),
            },
            url: config.app.createRoute("login"),
            type: "post",
            dateType: "json",
            cache: false,
            async: false,
            data: {
              username: username,
              password: password,
            },
            success: function (t) {
              $("#sign-in-error").css("color", "green");
              $("#sign-in-error").html(
                "<p>Đăng nhập thành công!</p><p>Trang sẽ tự động tải lại ngay.</p>"
              );
              $("#sign-in-error").show();

              // console.log(t)
              localStorage.setItem("user", JSON.stringify(t.user));
              localStorage.setItem("token", t.token);

              setTimeout(function () {
                if (typeof t.ref != "undefined") {
                  window.location = t.ref;
                  return;
                }
                userInterface();
                // window.location = "/"
              }, 1e3);
            },
            error: function (t) {
              let statusCode = t.status;
              if (statusCode == 401) {
                $("#sign-in-error").css("color", "red");
                $("#sign-in-error").html("<p>" + t.responseJSON.msg + "</p>");
                $("#passwordlogin").val("");
              } else if (statusCode == 422) {
                let errorMsg = "<p style='padding-bottom: 5px'>Lỗi:</p>";
                $.each(t.responseJSON.errors, function (key, value) {
                  errorMsg += `<p> - ${value} </p>`;
                });
                $("#sign-in-error").css("color", "red");
                $("#sign-in-error").html(errorMsg);
                $("#passwordlogin").val("");
              }
            },
          });
        }
      });
    </script>
    <script type="text/javascript">
      $(document).ready(function () {
        $("#top").change(function (t) {
          loadTop(t);
        });

        $("#serverid").change(function (t) {
          loadTop(t);
        });

        function loadTop(t) {
          $("#load-ranking-container").html(
            '<center><img src="/assets/img/loader.gif" /></center>'
          ),
            $("#loadingtop").html("");
          let type = parseInt($("#top").find(":selected").val());
          let serverId = $("#serverid").find(":selected").val();
          let str = "";
          switch (type) {
            case 1:
              $("ul.listtag li.head span.right").html("Lực chiến");
              break;
            case 2:
              $("ul.listtag li.head span.right").html("Level");
              break;
            case 3:
              $("ul.listtag li.head span.right").html("Online");
              break;
            case 4:
              $("ul.listtag li.head span.right").html("Hấp dẫn");
              break;
            case 5:
              $("ul.listtag li.head span.right").html("Tiêu xu");
              break;
            case 6:
              $("ul.listtag li.head span.right").html("Nạp xu");
              break;
          }
          // 1 === type ? $("ul.listtag li.head span.right").html("Lực chiến") : 2 === type && $("ul.listtag li.head span.right").html("Level"),
          $.ajax({
            headers: {
              "X-CSRF-TOKEN": $('meta[name="csrf-token"]').attr("content"),
            },
            url: config.app.createRoute("get_rank"),
            type: "post",
            dateType: "text",
            data: {
              sid: serverId,
              type: type,
            },
            success: function (res) {
              if (res.length <= 0) {
                $("#load-ranking-container").html(
                  "Server này chưa có nhân vật nào"
                );
                return;
              }
              let data = res;
              let i = 1;
              let typeOrigin = "";
              // console.log(data);
              data.map((e) => {
                let typeFromServer = "";
                switch (type) {
                  case 1:
                    typeFromServer = "FightPower";
                    break;
                  case 2:
                    typeFromServer = "Grade";
                    break;
                  case 3:
                    typeFromServer = "OnlineTime";
                    break;
                  case 4:
                    typeFromServer = "charmGP";
                    break;
                  case 5:
                    typeFromServer = "XuTieu";
                    break;
                  case 6:
                    typeFromServer = "Xunap";
                    break;
                }
                // type == 1 ? typeFromServer = "FightPower" : typeFromServer = "Grade";

                str += `<li><span class="tag green">${i++}</span><em title="${
                  e.NickName
                }">${e.NickName}</em><span class="right">${numberWithCommas(
                  e[typeFromServer]
                )}</span></li>`;
              });
              $("#load-ranking-container").html(str);
            },
          });
        }
        loadTop({ value: 1 });
      });
    </script>

    <script type="text/javascript">
      $(document).ready(function () {
        //Convert Coin helpers
        $(document).on("change", "#txtServer", function () {
          $("#txtPlayerNickName").val("");
          var serverId = $("#txtServer").val();
          if (serverId != null && serverId != 0) {
            $("#txtPlayerNickName").val("Đang tìm kiếm tên nhân vật");
            $.ajax({
              headers: {
                "X-CSRF-TOKEN": $('meta[name="csrf-token"]').attr("content"),
                Authorization: "Bearer " + getToken(),
              },
              url: config.app.createRoute("player-nickname"),
              type: "POST",
              dateType: "json",
              data: {
                serverId: serverId,
              },
              success: function (t) {
                if (typeof t.nickname != "undefined") {
                  $("#txtPlayerNickName").val(t.nickname);
                  $("#txtPlayerNickName").removeClass("d-none");
                  $("#selectPlayerNickName").addClass("d-none");
                } else if (typeof t.msg != "undefined") {
                  $("#txtPlayerNickName").val(t.msg);
                  $("#txtPlayerNickName").removeClass("d-none");
                  $("#selectPlayerNickName").addClass("d-none");
                } else {
                  $("#txtPlayerNickName").addClass("d-none");
                  var options = "";
                  t.forEach(function (p) {
                    options +=
                      '<option value="' +
                      p.id +
                      '">' +
                      p.nickname +
                      "</option>";
                  });
                  $("#selectPlayerNickName").html(options);
                  $("#selectPlayerNickName").removeClass("d-none");
                }
              },
              error: function (t) {
                $("#txtPlayerNickName").val(t.responseJSON.msg);
              },
            });
          }
        });

        $(document).on("input", "#txtCoinConvert", function () {
          let count = parseInt($("#txtCoinConvert").val());
          if (count >= 1000) {
            let coin = count * heSoCoin;
            coin += (coin * xuBonus) / 100;
            $("#txtMoneyReceive").val(coin);
          }
        });

        //Chang Email Helpers
        var timeChangeNewEmail = 0;
        $(document).on("input", "#txtNewEmail", function () {
          clearTimeout(timeChangeNewEmail);
          $("#newEmailError").css("color", "orange");
          $("#newEmailError").html("Đang kiểm tra địa chỉ Email...");
          $("#newEmailError").show();
          timeChangeNewEmail = setTimeout(function () {
            // console.log('changed')
            $.ajax({
              headers: {
                "X-CSRF-TOKEN": $('meta[name="csrf-token"]').attr("content"),
              },
              url: "ajax-public/check-is-valid-email",
              type: "POST",
              dateType: "json",
              data: {
                Fullname: $("#txtNewEmail").val(),
              },
              success: function (t) {
                // console.log(t)
                $("#newEmailError").show();
                $("#newEmailError").css("color", "green");
                $("#newEmailError").html(t.msg);
              },
              error: function (t) {
                let errorMsg = "";
                $.each(t.responseJSON.errors, function (key, value) {
                  errorMsg += ` - ${value} </br>`;
                });
                $("#newEmailError").css("color", "red");
                $("#newEmailError").html(errorMsg);
                $("#newEmailError").show();
              },
            });
          }, 500);
        });

        $(document).on("change", "#checkin_txtServer", function () {
          $("#checkin_txtPlayerNickName").val("");
          var serverId = $("#checkin_txtServer").val();
          if (serverId != null && serverId != 0) {
            $("#checkin_txtPlayerNickName").val("Đang tìm kiếm tên nhân vật");
            $.ajax({
              headers: {
                "X-CSRF-TOKEN": $('meta[name="csrf-token"]').attr("content"),
                Authorization: "Bearer " + getToken(),
              },
              url: config.app.createRoute("player-nickname"),
              type: "POST",
              dateType: "json",
              data: {
                serverId: serverId,
              },
              success: function (t) {
                if (typeof t.nickname != "undefined") {
                  $("#checkin_txtPlayerNickName").val(t.nickname);
                  $("#checkin_txtPlayerNickName").removeClass("d-none");
                  $("#checkin_selectPlayerNickName").addClass("d-none");
                } else if (typeof t.msg != "undefined") {
                  $("#checkin_txtPlayerNickName").val(t.msg);
                  $("#checkin_txtPlayerNickName").removeClass("d-none");
                  $("#checkin_selectPlayerNickName").addClass("d-none");
                } else {
                  $("#checkin_txtPlayerNickName").addClass("d-none");
                  var options = "";
                  t.forEach(function (p) {
                    options +=
                      '<option value="' +
                      p.id +
                      '">' +
                      p.nickname +
                      "</option>";
                  });
                  $("#checkin_selectPlayerNickName").html(options);
                  $("#checkin_selectPlayerNickName").removeClass("d-none");
                }
              },
              error: function (t) {
                $("#checkin_txtPlayerNickName").val(t.responseJSON.msg);
              },
            });
          }
        });

        /**
         *
         * FUNCTIONAL AREA
         *
         */
        $(document).on("click", "#changePasswordBtn", function () {
          let txtOldPassword = $("#txtOldPassword").val();
          let txtNewPassword = $("#txtNewPassword").val();
          let txtConfirmPassword = $("#txtConfirmPassword").val();
          $.ajax({
            headers: {
              "X-CSRF-TOKEN": $('meta[name="csrf-token"]').attr("content"),
              Authorization: "Bearer " + getToken(),
            },
            url: config.app.createRoute("change-password"),
            type: "POST",
            dateType: "json",
            data: {
              oldPassword: txtOldPassword,
              password: txtNewPassword,
              password_confirmation: txtConfirmPassword,
            },
            success: function (t) {
              let msg = t.msg;
              $(".errors-change-password-form").css("color", "green");
              $(".errors-change-password-form").html(msg);
              $(".errors-change-password-form").show();
              $("#changePasswordFrm").trigger("reset");
            },
            error: function (t) {
              reloadCaptcha();
              if (t.status == 422) {
                let errorMsg = "Đổi mật khẩu không thành công: </br>";
                $.each(t.responseJSON.errors, function (key, value) {
                  errorMsg += ` - ${value} </br>`;
                });
                $(".errors-change-password-form").css("color", "red");
                $(".errors-change-password-form").html(errorMsg);
                $(".errors-change-password-form").show();
              } else if ((t.status = 400)) {
                $(".errors-change-password-form").css("color", "red");
                $(".errors-change-password-form").html(t.responseJSON.msg);
                $(".errors-change-password-form").show();
              }
              $("#changePasswordFrm").trigger("reset");
            },
          });
        });
        /*
         * VERIFY EMAIL
         */

        $(document).on("click", "#verifyEmail", function () {
          $(".errors-register-form").css("color", "orange");
          $(".errors-register-form").html(
            'Đang xử lý, vui lòng đợi trong giây lát...<img src="/assets/img/loader.gif" style="width: 16px;height: 16px;"/>'
          );
          $(".errors-register-form").show(),
            $.ajax({
              headers: {
                "X-CSRF-TOKEN": $('meta[name="csrf-token"]').attr("content"),
              },
              url: "account/send-verify-email",
              type: "post",
              dateType: "json",
              data: {
                captcha: $("#txtCaptcha").val(),
              },
              success: function (t) {
                reloadCaptcha();
                $("#txtCaptcha").val("");
                $(".errors-register-form").css("color", "green");
                $(".errors-register-form").html(
                  "Gửi thư thành công, vui lòng kiểm tra hòm thư (Cả trong spam)."
                );
                $(".errors-register-form").show();
                $("#createAccountForm").trigger("reset");
              },
              error: function (t) {
                reloadCaptcha();
                if ((t.status = 422)) {
                  let errorMsg =
                    "Gửi thư xác thực Email không thành công: </br>";
                  $.each(t.responseJSON.errors, function (key, value) {
                    errorMsg += ` - ${value} </br>`;
                  });
                  $("#txtCodeReg").val("");
                  $(".errors-register-form").css("color", "red");
                  $(".errors-register-form").html(errorMsg);
                  $(".errors-register-form").show();
                }
                if ((t.status = 400)) {
                  $("#txtCodeReg").val("");
                  $(".errors-register-form").css("color", "red");
                  $(".errors-register-form").html(t.responseJSON.msg);
                  $(".errors-register-form").show();
                }
              },
            });
        });

        /*
         * RECHARGE CARD
         */
        $(document).on("click", "#rechargeCardBtn", function () {
          let txtSerial = $("#txtSerial").val();
          let txtPasscard = $("#txtPasscard").val();
          let txtCaptcha = $("#txtCaptcha").val();
          let amountCard = $("#menhgia_the").find(":selected").val();

          let isPassed = true;

          if (txtSerial.length <= 0) {
            // console.log("serial Er")
            $(".serialError").show();
            isPassed = false;
          } else $(".serialError").hide();
          if (txtPasscard.length <= 0) {
            // console.log("Passcard Er");
            $(".passcardError").show();
            isPassed = false;
          } else $(".passcardError").hide();
          if (amountCard.length <= 0) {
            // console.log("amountCard Er");
            $(".amountError").show();
            isPassed = false;
          } else $(".amountError").hide();
          if (typeCard == 0) {
            // console.log("typeCard Er");
            $(".typeCardError").show();
            isPassed = false;
          } else $(".typeCardError").hide();
          //
          if (!isPassed) {
            return;
          }

          //ConvertTypeCard to Text

          //Turn off error badge
          $(".serialError").hide();
          $(".passcardError").hide();
          $(".amountError").hide();
          $(".typeCardError").hide();

          $(".errors-recharge-form").css("color", "orange");
          $(".errors-recharge-form").html(
            'Đang xử lý nạp thẻ, vui lòng đợi trong giây lát...<img src="/assets/img/loader.gif" style="width: 16px;height: 16px;"/>'
          );
          $(".errors-recharge-form").show();
          $.ajax({
            headers: {
              "X-CSRF-TOKEN": $('meta[name="csrf-token"]').attr("content"),
            },
            url: "account/recharge-card",
            type: "POST",
            dateType: "json",
            data: {
              serial: txtSerial,
              pin: txtPasscard,
              card_type: typeCard,
              card_amount: amountCard,
              captcha: txtCaptcha,
            },
            success: function (t) {
              reloadCaptcha();
              let msg = t.msg;
              $(".errors-recharge-form").css("color", "green");
              $(".errors-recharge-form").html(msg);
              $(".errors-recharge-form").show();
              $("#changePasswordFrm").trigger("reset");
            },
            error: function (t) {
              reloadCaptcha();
              if (t.status == 422) {
                let errorMsg = "Nạp thẻ không thành công: </br>";
                $.each(t.responseJSON.errors, function (key, value) {
                  errorMsg += ` - ${value} </br>`;
                });
                $(".errors-recharge-form").css("color", "red");
                $(".errors-recharge-form").html(errorMsg);
                $(".errors-recharge-form").show();
              } else if ((t.status = 400)) {
                $(".errors-recharge-form").css("color", "red");
                $(".errors-recharge-form").html(t.responseJSON.msg);
                $(".errors-recharge-form").show();
              }
              $("#rechargeForm").trigger("reset");
            },
          });
        });

        /**
         * Convert Coin
         */
        $(document).on("click", "#convertCoinBtn", function () {
          let coinConvert = parseInt($("#txtCoinConvert").val());
          let serverId = parseInt($("#txtServer :selected").val());
          let txtCaptcha = $("#txtCaptcha").val();
          let isPassed = true;
          let playerId = 0;
          if (!$("#selectPlayerNickName").hasClass("d-none")) {
            playerId = $("#selectPlayerNickName").val();
          }

          $(".errors-convert-coin-form").html("");
          if (serverId == 0 || serverId == null) {
            $(".errors-convert-coin-form").html("Vui lòng chọn server");
            $(".errors-convert-coin-form").show();
            isPassed = false;
          }
          if (isNaN(coinConvert) || coinConvert < 1000) {
            $(".errors-convert-coin-form").html(
              "Coin chuyển đổi phải trên 1000"
            );
            $(".errors-convert-coin-form").show();
            isPassed = false;
          }
          if (!isPassed) {
            return;
          }

          //Turn off error badge
          $(".errors-convert-coin-form").html("");
          $(".errors-convert-coin-form").hide();

          $(".errors-convert-coin-form").css("color", "orange");
          $(".errors-convert-coin-form").html(
            'Đang xử lý chuyển xu, vui lòng đợi trong giây lát...<img src="/assets/img/loader.gif" style="width: 16px;height: 16px;"/>'
          );
          $(".errors-convert-coin-form").show();
          $.ajax({
            headers: {
              "X-CSRF-TOKEN": $('meta[name="csrf-token"]').attr("content"),
              Authorization: "Bearer " + getToken(),
            },
            url: config.app.createRoute("chargeMoney"),
            type: "POST",
            dateType: "json",
            data: {
              server_id: serverId,
              money: coinConvert,
              captcha: txtCaptcha,
              playerID: playerId,
            },
            success: function (t) {
              let msg = t.msg;
              $(".errors-convert-coin-form").css("color", "green");
              $(".errors-convert-coin-form").html(msg);
              $(".errors-convert-coin-form").show();
              $("#convertCoinFrm").trigger("reset");
              reloadCaptcha();
              reloadUserInfo();
            },
            error: function (t) {
              reloadCaptcha();
              if (t.status == 422) {
                let errorMsg = "Nạp thẻ không thành công: </br>";
                $.each(t.responseJSON.errors, function (key, value) {
                  errorMsg += ` - ${value} </br>`;
                });
                $(".errors-convert-coin-form").css("color", "red");
                $(".errors-convert-coin-form").html(errorMsg);
                $(".errors-convert-coin-form").show();
              } else if ((t.status = 400)) {
                $(".errors-convert-coin-form").css("color", "red");
                $(".errors-convert-coin-form").html(t.responseJSON.msg);
                $(".errors-convert-coin-form").show();
              }
              $("#convertCoinFrm").trigger("reset");
            },
          });
        });

        /*
         * CHANGE EMAIL ACTION
         */
        $(document).on("click", "#changeEmailBtn", function () {
          $(".errors-change-email-form").css("color", "orange");
          $(".errors-change-email-form").html(
            'Đang xử lý, vui lòng đợi trong giây lát...<img src="/assets/img/loader.gif" style="width: 16px;height: 16px;"/>'
          );
          $(".errors-change-email-form").show(),
            $.ajax({
              headers: {
                "X-CSRF-TOKEN": $('meta[name="csrf-token"]').attr("content"),
              },
              url: "account/change-email",
              type: "post",
              dateType: "json",
              data: {
                Fullname: $("#txtNewEmail").val(),
                code: $("#txtCodeOldMail").val(),
                captcha: $("#txtCaptcha").val(),
              },
              success: function (t) {
                reloadCaptcha();
                $("#txtCaptcha").val("");
                $(".errors-change-email-form").css("color", "green");
                $(".errors-change-email-form").html(
                  "Thay đổi email thành công!"
                );
                $(".errors-change-email-form").show();
                $("#changeEmailFrm").trigger("reset");
                setTimeout(function () {
                  window.location = "/account";
                }, 1e3);
              },
              error: function (t) {
                reloadCaptcha();
                if (t.status == 422) {
                  $("#txtCaptcha").val("");
                  let errorMsg = "Thay đổi Email không thành công: </br>";
                  $.each(t.responseJSON.errors, function (key, value) {
                    errorMsg += ` - ${value} </br>`;
                  });
                  $(".errors-change-email-form").css("color", "red");
                  $(".errors-change-email-form").html(errorMsg);
                  $(".errors-change-email-form").show();
                } else if ((t.status = 400)) {
                  $("#txtCaptcha").val("");
                  $(".errors-change-email-form").css("color", "red");
                  $(".errors-change-email-form").html(t.responseJSON.msg);
                  $(".errors-change-email-form").show();
                }
              },
            });
        });
        /*
         * Send code to change verified email
         */
        $(document).on("click", "#sendChangeEmailCode", function () {
          $(".errors-change-email-form").css("color", "orange");
          $(".errors-change-email-form").html(
            'Đang xử lý, vui lòng đợi trong giây lát...<img src="/assets/img/loader.gif" style="width: 16px;height: 16px;"/>'
          );
          $(".errors-change-email-form").show(),
            $.ajax({
              headers: {
                "X-CSRF-TOKEN": $('meta[name="csrf-token"]').attr("content"),
              },
              url: "account/send-code-verified-email",
              type: "post",
              dateType: "json",
              data: {
                captcha: $("#txtCaptcha").val(),
              },
              success: function (t) {
                reloadCaptcha();
                $("#txtCaptcha").val("");
                $(".errors-change-email-form").css("color", "green");
                $(".errors-change-email-form").html(
                  "Gửi mã xác thực để thay đổi email thành công!"
                );
                $(".errors-change-email-form").show();
                $("#changeVerifiedEmailFrm").trigger("reset");
              },
              error: function (t) {
                if (t.status == 422) {
                  $("#txtCaptcha").val("");
                  let errorMsg =
                    "Gửi mã xác thực đến Email không thành công: </br>";
                  $.each(t.responseJSON.errors, function (key, value) {
                    errorMsg += ` - ${value} </br>`;
                  });
                  $(".errors-change-email-form").css("color", "red");
                  $(".errors-change-email-form").html(errorMsg);
                  $(".errors-change-email-form").show();
                } else if ((t.status = 400)) {
                  $("#txtCaptcha").val("");
                  $(".errors-change-email-form").css("color", "red");
                  $(".errors-change-email-form").html(t.responseJSON.msg);
                  $(".errors-change-email-form").show();
                }
              },
            });
        });
        /*
         * Change Phone number
         */

        $(document).on("click", "#changePhoneNumber", function () {
          $(".errorMessageAccount").css("color", "orange");
          $(".errorMessageAccount").html(
            'Đang xử lý, vui lòng đợi trong giây lát...<img src="/assets/img/loader.gif" style="width: 16px;height: 16px;"/>'
          );
          $(".errorMessageAccount").show(),
            $.ajax({
              headers: {
                "X-CSRF-TOKEN": $('meta[name="csrf-token"]').attr("content"),
              },
              url: "account/change-phone",
              type: "post",
              dateType: "json",
              data: {
                Phone: $("#txtNewPhoneNumber").val(),
                captcha: $("#txtCaptcha").val(),
              },
              success: function (t) {
                reloadCaptcha();
                $("#txtCaptcha").val("");
                $(".errorMessageAccount").css("color", "green");
                $(".errorMessageAccount").html(
                  "Thay đổi số điện thoại thành công."
                );
                $(".errorMessageAccount").show();
                $("#createAccountForm").trigger("reset");
                setTimeout(function () {
                  window.location = "/account";
                }, 1e3);
              },
              error: function (t) {
                reloadCaptcha();
                if ((t.status = 422)) {
                  let errorMsg =
                    "Thay đổi số điện thoại không thành công: </br>";
                  $.each(t.responseJSON.errors, function (key, value) {
                    errorMsg += ` - ${value} </br>`;
                  });
                  $("#txtCodeReg").val("");
                  $(".errorMessageAccount").css("color", "red");
                  $(".errorMessageAccount").html(errorMsg);
                  $(".errorMessageAccount").show();
                }
                if ((t.status = 400)) {
                  $("#txtCodeReg").val("");
                  $(".errorMessageAccount").css("color", "red");
                  $(".errorMessageAccount").html(t.responseJSON.msg);
                  $(".errorMessageAccount").show();
                }
              },
            });
        });

        /*
         * Change Link Play
         */

        $(document).on("click", "#changeLinkPlay", function () {
          //Turn off error badge
          $(".errorMessageAccount").html("");
          $(".errorMessageAccount").hide();

          $(".errorMessageAccount").css("color", "orange");
          $(".errorMessageAccount").html(
            'Đang xử lý đổi link, vui lòng đợi trong giây lát...<img src="/assets/img/loader.gif" style="width: 16px;height: 16px;"/>'
          );
          $(".errorMessageAccount").show();
          $.ajax({
            headers: {
              "X-CSRF-TOKEN": $('meta[name="csrf-token"]').attr("content"),
            },
            url: "account/change-link-play-without-authenticate",
            type: "POST",
            dateType: "json",
            data: {
              captcha: $("#txtCaptcha").val(),
            },
            success: function (t) {
              reloadCaptcha();
              $(".errorMessageAccount").css("color", "green");
              $(".errorMessageAccount").html("Đổi link chơi game thành công");
              $(".errorMessageAccount").show();
              $("#linkPlayGame").val(t.linkPlay);
              $("#txtCaptcha").val("");
            },
            error: function (t) {
              reloadCaptcha();
              if (t.status == 422) {
                let errorMsg = "Đổi link chơi game không thành công: </br>";
                $.each(t.responseJSON.errors, function (key, value) {
                  errorMsg += ` - ${value} </br>`;
                });
                $(".errorMessageAccount").css("color", "red");
                $(".errorMessageAccount").html(errorMsg);
                $(".errorMessageAccount").show();
              } else if ((t.status = 400)) {
                $(".errorMessageAccount").css("color", "red");
                $(".errorMessageAccount").html(t.responseJSON.msg);
                $(".errorMessageAccount").show();
              }
              $("#changeLinkPlayFrm").trigger("reset");
            },
          });
        });

        /*
         * Change Nickname
         */
        $(document).on("click", "#changeNickName", function () {
          //Turn off error badge
          $(".errors-change-nickname-form").css("color", "orange");
          $(".errors-change-nickname-form").html(
            'Đang xử lý, vui lòng đợi trong giây lát...<img src="/assets/img/loader.gif" style="width: 16px;height: 16px;"/>'
          );
          $(".errors-change-nickname-form").show();
          $.ajax({
            headers: {
              "X-CSRF-TOKEN": $('meta[name="csrf-token"]').attr("content"),
            },
            url: "account/change-nickname",
            type: "POST",
            dateType: "json",
            data: {
              server_id: $("select[name=txtServer]").val(),
              new_name: $("#new_nickname").val(),
              captcha: $("#txtCaptcha").val(),
            },
            success: function (t) {
              reloadCaptcha();
              $(".errors-change-nickname-form").css("color", "green");
              $(".errors-change-nickname-form").html(
                "Đổi tên nhân vật thành công"
              );
              $(".errors-change-nickname-form").show();
              $("#changeNickNameFrm").trigger("reset");
            },
            error: function (t) {
              reloadCaptcha();
              if (t.status == 422) {
                let errorMsg = "Đổi tên nhân vật không thành công: </br>";
                $.each(t.responseJSON.errors, function (key, value) {
                  errorMsg += ` - ${value} </br>`;
                });
                $(".errors-change-nickname-form").css("color", "red");
                $(".errors-change-nickname-form").html(errorMsg);
                $(".errors-change-nickname-form").show();
              } else if ((t.status = 400)) {
                $(".errors-change-nickname-form").css("color", "red");
                $(".errors-change-nickname-form").html(t.responseJSON.msg);
                $(".errors-change-nickname-form").show();
              }
              $("#changeNickNameFrm").trigger("reset");
            },
          });
        });

        $(document).on("click", "#checkinBtn", function () {
          let serverId = parseInt($("#checkin_txtServer :selected").val());
          let txtCaptcha = $("#checkin_txtCaptcha").val();
          let isPassed = true;
          let playerId = 0;
          if (!$("#checkin_selectPlayerNickName").hasClass("d-none")) {
            playerId = $("#checkin_selectPlayerNickName").val();
          }

          $(".errors-checkin-form").html("");
          if (serverId == 0 || serverId == null) {
            $(".errors-checkin-form").html("Vui lòng chọn server");
            $(".errors-checkin-form").show();
            isPassed = false;
          }
          if (!isPassed) {
            return;
          }

          //Turn off error badge
          $(".errors-checkin-form").html("");
          $(".errors-checkin-form").hide();

          $(".errors-checkin-form").css("color", "orange");
          $(".errors-checkin-form").html(
            'Đang xử lý, vui lòng đợi trong giây lát...<img src="/assets/img/loader.gif" style="width: 16px;height: 16px;"/>'
          );
          $(".errors-checkin-form").show();
          $.ajax({
            headers: {
              "X-CSRF-TOKEN": $('meta[name="csrf-token"]').attr("content"),
            },
            url: "account/checkin",
            type: "POST",
            dateType: "json",
            data: {
              server_id: serverId,
              captcha: txtCaptcha,
              player_id: playerId,
            },
            success: function (t) {
              let msg = t.msg;
              $(".errors-checkin-form").css("color", "green");
              $(".errors-checkin-form").html(msg);
              $(".errors-checkin-form").show();
              $("#checkinFrm").trigger("reset");
              reloadCaptcha();
            },
            error: function (t) {
              reloadCaptcha();
              if (t.status == 422) {
                let errorMsg = "Điểm danh không thành công: </br>";
                $.each(t.responseJSON.errors, function (key, value) {
                  errorMsg += ` - ${value} </br>`;
                });
                $(".errors-checkin-form").css("color", "red");
                $(".errors-checkin-form").html(errorMsg);
                $(".errors-checkin-form").show();
              } else if ((t.status = 400)) {
                $(".errors-checkin-form").css("color", "red");
                $(".errors-checkin-form").html(t.responseJSON.msg);
                $(".errors-checkin-form").show();
              }
              $("#checkinFrm").trigger("reset");
            },
          });
        });
      });
    </script>
  </body>
</html>
